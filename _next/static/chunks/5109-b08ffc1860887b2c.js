"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5109],{57155:function(e,t,r){r.d(t,{R:function(){return F}});var n,i,o=r(4111),s=r(47568),a=r(51438);function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var l=r(14924),c=r(82662);function p(e,t,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,c.Z)(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r||e):i.value}})(e,t,r)}var h=r(88029),f=r(26626),g=r(89682),v=r(37869);function m(e){var t=e.name,r=e.version,n=e.createWidget;w().$in.widgetFactory[t+r]=n}function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=w(),n=t.name,i=t.version,o=r.$in.widgetFactory[n+i];if("function"!=typeof o)throw Error('The widget with defined name and version "'.concat(n+i,'" is not defined.'));return o(t)}function w(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window;return e.__merkur__||(e.__merkur__={$in:{widgets:[],widgetFactory:{}},$external:{},$dependencies:{},register:m,create:y}),e.__merkur__}var _={isES9Supported:function(){return void 0===n&&(n=_.test("return (() => { const o = { t: 1 }; return { ...o }; })() && (async () => ({}))()")&&!!Object.values),n},isES11Supported:function(){return void 0===i&&(i=_.test("return (() => { const o = { t: { q: true } }; return o?.t?.q && (o?.a?.q ?? true); })()")&&_.test('return typeof Promise.allSettled === "function"')&&_.test('return typeof globalThis !== "undefined"')&&_.test('return typeof 9007199254740991n === "bigint"')),i},test:function(e){try{return!!Function(e)()}catch(t){return!1}}};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var S=Object.freeze({"#":"id",".":"className"}),k=v.memo(function(e){var t=e.html,r=e.containerSelector,n=e.children,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e||0===e.length)return{};var t=-1;for(var r in S){var n=e.lastIndexOf(r);t<n&&(t=n)}var i=e[t],o=e.substr(t+1);return(0,l.Z)({},S[i],o)}(r);return t?v.createElement("div",P({},i,{dangerouslySetInnerHTML:{__html:t}})):v.createElement("div",i,n)}),E=function(e){(0,h.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e))._isMounted=!1,n._html=null,n}return d(r,[{key:"html",get:function(){throw Error("The html getter is abstract and must be overridden")}},{key:"container",get:function(){throw Error("The container getter is abstract and must be overridden")}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"_renderFallback",value:function(){var e=this.props.children,t=(this.state||{}).encounteredError;return"function"==typeof e?e({error:void 0===t?null:t}):v.isValidElement(e)?e:null}},{key:"_clearCachedHtml",value:function(){this._html=null}},{key:"_isClient",value:function(){return"undefined"!=typeof document}},{key:"_getWidgetHTML",value:function(){return null!==this._html||(this._html=this.html||this._getSSRHTML()),this._html}},{key:"_getSSRHTML",value:function(){if(!this._isMounted&&this._isClient()){var e,t,r;return(null===(e=this.container)||void 0===e?void 0:null===(t=e.children)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:r.outerHTML)||""}return""}},{key:"_isSSRHydrate",value:function(){return this._getSSRHTML().length>0}}],[{key:"hasWidgetChanged",value:function(e,t){return!!(e&&e.name&&e.version&&t&&t.name&&t.version&&(e.version!==t.version||e.name!==t.name))}},{key:"validateProperties",value:function(e){return!!(e&&e.name&&e.version)}}]),r}(v.Component),b="@merkur/plugin-error.error",F=function(e){(0,h.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e))._widget=null,n._handleClientError=n._handleError.bind((0,o.Z)(n)),n.state={encounteredError:!1,assetsLoaded:!1,cachedWidgetMeta:null},n}return d(r,[{key:"html",get:function(){var e;return(null===(e=this.props.widgetProperties)||void 0===e?void 0:e.html)||null}},{key:"container",get:function(){var e;return this._isClient()&&(null==document?void 0:document.querySelector(null===(e=this.props.widgetProperties)||void 0===e?void 0:e.containerSelector))||null}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state.assetsLoaded!==t.assetsLoaded||this.state.encounteredError!==t.encounteredError||!E.validateProperties(this.props.widgetProperties)||E.hasWidgetChanged(this.props.widgetProperties,e.widgetProperties))return!0;if(this._widget&&e.widgetProperties&&e.widgetProperties.props){if(Object.keys(e.widgetProperties.props).length!==Object.keys(this.props.widgetProperties.props).length)return this._widget.setProps(e.widgetProperties.props),!1;for(var r in e.widgetProperties.props)if(!this.props.widgetProperties||!this.props.widgetProperties.props||e.widgetProperties.props[r]!==this.props.widgetProperties.props[r])return this._widget.setProps(e.widgetProperties.props),!1}if(this._widget&&e.widgetProperties&&e.widgetProperties.state){if(Object.keys(e.widgetProperties.state).length!==Object.keys(this.props.widgetProperties.state).length)this._widget.setState(e.widgetProperties.state);else for(var n in e.widgetProperties.state)if(!this.props.widgetProperties||!this.props.widgetProperties.state||e.widgetProperties.state[n]!==this.props.widgetProperties.state[n]){this._widget.setState(e.widgetProperties.state);break}}return!1}},{key:"componentDidMount",value:function(){var e,t,n;p(e=(0,c.Z)(r.prototype),"componentDidMount",this).call(this),this._loadWidgetAssets()}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.widgetProperties,n=e.widgetProperties;if(this.state.assetsLoaded&&t.assetsLoaded!==this.state.assetsLoaded)return this._mountWidget();if(!E.validateProperties(r)&&E.validateProperties(n)){this._removeWidget(),this.setState({encounteredError:!1,assetsLoaded:!1,cachedWidgetMeta:null});return}if(E.validateProperties(r)&&!E.validateProperties(n))return this._loadWidgetAssets();if(E.hasWidgetChanged(r,n)){this._removeWidget(),this._loadWidgetAssets();return}}},{key:"componentWillUnmount",value:function(){this._removeWidget()}},{key:"render",value:function(){var e=this.props.widgetProperties,t=this.state,r=t.encounteredError,n=t.assetsLoaded;if(!E.validateProperties(e)||r||this._isClient()&&!this._isSSRHydrate()&&!n)return this._renderFallback();if(!e.containerSelector)throw Error("The widgetProperties.containerSelector is not defined");var i=this._getWidgetHTML();return v.createElement(v.Fragment,null,(!this._isClient()||this._isSSRHydrate())&&this._renderStyleAssets(),v.createElement(k,{containerSelector:e.containerSelector,html:i}))}},{key:"_renderStyleAssets",value:function(){var e=this.props.widgetProperties;return(Array.isArray(null==e?void 0:e.assets)?e.assets:[]).filter(function(e){return["stylesheet","inlineStyle"].includes(e.type)&&e.source}).map(function(e,t){switch(e.type){case"stylesheet":return v.createElement("link",{rel:"stylesheet",href:e.source,key:t});case"inlineStyle":return v.createElement("style",{key:t,dangerouslySetInnerHTML:{__html:e.source}})}})}},{key:"_handleError",value:function(e){"function"==typeof this.props.onError&&this.props.onError(e),this.setState({encounteredError:e})}},{key:"_removeWidget",value:function(){this._widget&&(this.props.onWidgetUnmounting&&this.props.onWidgetUnmounting(this._widget),"function"==typeof this._widget.off&&this._widget.off(b,this._handleClientError),this._widget.unmount(),this._widget=null,this._clearCachedHtml())}},{key:"_loadWidgetAssets",value:function(){var e=this,t=this.props.widgetProperties;if(E.validateProperties(t)&&!this._widget)return Promise.all([function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.head,r=t.querySelectorAll("style");return Promise.all(e.filter(function(e){return e.source&&("stylesheet"===e.type&&!t.querySelector("link[href='".concat(e.source,"']"))||"inlineStyle"===e.type&&Array.from(r).reduce(function(t,r){return r.innerHTML!==e.source&&t},!0))}).map(function(e){var r,n;return new Promise(function(r,n){if("stylesheet"===e.type){var i=document.createElement("link");i.onload=r,i.onerror=n,i.rel="stylesheet",i.href=e.source,t.appendChild(i)}else{var o=document.createElement("style");o.innerHTML=e.source,t.appendChild(o),r()}})}))}(t.assets),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.head,r=t.querySelectorAll("script");return Promise.all(e.reduce(function(e,n){var i=n.source,o=Object.assign({},n);return"script"!==o.type&&"inlineScript"!==o.type?e:i!==Object(i)||(i.es11&&_.isES11Supported()?o.source=i.es11:i.es9&&_.isES9Supported()?o.source=i.es9:o.source=i.es5,o.source)?(t.querySelector("script[src='".concat(o.source,"']"))||Array.from(r).reduce(function(e,t){return t.text===o.source||e},!1)||o.test&&_.test(o.test)||e.push(o),e):(console.warn("Asset '".concat(o.name,"' is missing ES variant and could not be loaded.")),e)},[]).map(function(e){var r,n;return new Promise(function(r,n){var i=document.createElement("script");if("script"===e.type){i.defer=!0,i.onload=r,i.onerror=n,i.src=e.source;var o=e.attr;if(o&&Object.keys(o).length)for(var s in o){var a=o[s];"boolean"==typeof a?a?i.setAttribute(s,""):i.removeAttribute(s):i.setAttribute(s,a)}}else i.text=e.source,r();t.appendChild(i)})}))}(t.assets)]).then(function(){return new Promise(function(t){e.setState({assetsLoaded:!0},function(){t()})})}).catch(function(t){return e._handleError(t)})}},{key:"_mountWidget",value:function(){var e=this;return(0,s.Z)(function(){var t,r,n,i,o,s,a;return(0,g.__generator)(this,function(s){switch(s.label){case 0:if(r=(t=e.props).widgetProperties,n=t.onWidgetMounted,o=void 0!==(i=t.debug)&&i,!E.validateProperties(r)||e._widget)return[2];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,w().create(r)];case 2:return e._widget=s.sent(),[4,e._widget.mount()];case 3:return s.sent(),"function"==typeof e._widget.on&&e._widget.on(b,e._handleClientError),"function"==typeof n&&n(e._widget),[3,5];case 4:return a=s.sent(),o&&console.warn(a),[3,5];case 5:return[2]}})})()}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(t&&e&&E.validateProperties(e.widgetProperties)){var r=e.widgetProperties,n=r.version,i=r.name;if(!t.cachedWidgetMeta)return{cachedWidgetMeta:{name:i,version:n}};if(E.hasWidgetChanged(t.cachedWidgetMeta,e.widgetProperties))return{encounteredError:!1,assetsLoaded:!1,cachedWidgetMeta:{name:i,version:n}}}return null}}]),r}(E)},93986:function(e,t){var r;(r=t.s||(t.s={}))[r.Backspace=8]="Backspace",r[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Shift=16]="Shift",r[r.Ctrl=17]="Ctrl",r[r.Alt=18]="Alt",r[r.PauseBreak=19]="PauseBreak",r[r.CapsLock=20]="CapsLock",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.LeftArrow=37]="LeftArrow",r[r.UpArrow=38]="UpArrow",r[r.RightArrow=39]="RightArrow",r[r.DownArrow=40]="DownArrow",r[r.Insert=45]="Insert",r[r.Delete=46]="Delete",r[r.Zero=48]="Zero",r[r.ClosedParen=48]="ClosedParen",r[r.One=49]="One",r[r.ExclamationMark=49]="ExclamationMark",r[r.Two=50]="Two",r[r.AtSign=50]="AtSign",r[r.Three=51]="Three",r[r.PoundSign=51]="PoundSign",r[r.Hash=51]="Hash",r[r.Four=52]="Four",r[r.DollarSign=52]="DollarSign",r[r.Five=53]="Five",r[r.PercentSign=53]="PercentSign",r[r.Six=54]="Six",r[r.Caret=54]="Caret",r[r.Hat=54]="Hat",r[r.Seven=55]="Seven",r[r.Ampersand=55]="Ampersand",r[r.Eight=56]="Eight",r[r.Star=56]="Star",r[r.Asterik=56]="Asterik",r[r.Nine=57]="Nine",r[r.OpenParen=57]="OpenParen",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.LeftWindowKey=91]="LeftWindowKey",r[r.RightWindowKey=92]="RightWindowKey",r[r.SelectKey=93]="SelectKey",r[r.Numpad0=96]="Numpad0",r[r.Numpad1=97]="Numpad1",r[r.Numpad2=98]="Numpad2",r[r.Numpad3=99]="Numpad3",r[r.Numpad4=100]="Numpad4",r[r.Numpad5=101]="Numpad5",r[r.Numpad6=102]="Numpad6",r[r.Numpad7=103]="Numpad7",r[r.Numpad8=104]="Numpad8",r[r.Numpad9=105]="Numpad9",r[r.Multiply=106]="Multiply",r[r.Add=107]="Add",r[r.Subtract=109]="Subtract",r[r.DecimalPoint=110]="DecimalPoint",r[r.Divide=111]="Divide",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.NumLock=144]="NumLock",r[r.ScrollLock=145]="ScrollLock",r[r.SemiColon=186]="SemiColon",r[r.Equals=187]="Equals",r[r.Comma=188]="Comma",r[r.Dash=189]="Dash",r[r.Period=190]="Period",r[r.UnderScore=189]="UnderScore",r[r.PlusSign=187]="PlusSign",r[r.ForwardSlash=191]="ForwardSlash",r[r.Tilde=192]="Tilde",r[r.GraveAccent=192]="GraveAccent",r[r.OpenBracket=219]="OpenBracket",r[r.ClosedBracket=221]="ClosedBracket",r[r.Quote=222]="Quote"},72951:function(e,t,r){function n(e,t,r,n){var i,o=!1,s=0;function a(){i&&clearTimeout(i)}function u(){for(var u=arguments.length,d=Array(u),l=0;l<u;l++)d[l]=arguments[l];var c=this,p=Date.now()-s;function h(){s=Date.now(),r.apply(c,d)}!o&&(n&&!i&&h(),a(),void 0===n&&p>e?h():!0!==t&&(i=setTimeout(n?function(){i=void 0}:h,void 0===n?e-p:e)))}return"boolean"!=typeof t&&(n=r,r=t,t=void 0),u.cancel=function(){a(),o=!0},u}function i(e,t,r){return void 0===r?n(e,t,!1):n(e,r,!1!==t)}r.d(t,{D:function(){return i}})}}]);
//# sourceMappingURL=5109-b08ffc1860887b2c.js.map